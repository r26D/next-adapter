#!/usr/bin/env node
var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _chalk=_interopRequireDefault(require("chalk"));var _commander=require("commander");var _path=require("path");var _customize=require("../customize");var _update=_interopRequireDefault(require("./update"));var projectDirectory='';var packageJson=function packageJson(){return require('@expo/next-adapter/package.json');};var program=new _commander.Command(packageJson().name).version(packageJson().version).arguments('<project-directory>').usage(_chalk.default.green('<project-directory>')+" [options]").description('Generate static Next.js files into your project.').option('-c, --customize','Select template files you want to add to your project').option('-f, --force','Allows replacing existing files').action(function(inputProjectDirectory,options){projectDirectory=inputProjectDirectory;}).allowUnknownOption().parse(process.argv);function run(){var resolvedProjectRoot;return _regenerator.default.async(function run$(_context){while(1){switch(_context.prev=_context.next){case 0:if(typeof projectDirectory==='string'){projectDirectory=projectDirectory.trim();}resolvedProjectRoot=(0,_path.resolve)(projectDirectory);(0,_customize.runAsync)({projectRoot:resolvedProjectRoot,force:program.force,yes:!program.customize});case 3:case"end":return _context.stop();}}},null,null,null,Promise);}run().then(_update.default).catch(function _callee(reason){return _regenerator.default.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log();console.log('Aborting installation.');if(reason.command){console.log("  "+_chalk.default.magenta(reason.command)+" has failed.");}else{console.log(_chalk.default.red('An unexpected error was encountered. Please report it as a bug:'));console.log(reason);}console.log();_context2.next=6;return _regenerator.default.awrap((0,_update.default)());case 6:process.exit(1);case 7:case"end":return _context2.stop();}}},null,null,null,Promise);});